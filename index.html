<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>IPTV Player - Renkaku Style</title>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/shaka-player/4.3.5/shaka-player.compiled.min.js"></script>
  <style>
    body {
      margin: 0;
      background: #111;
      color: #fff;
      font-family: sans-serif;
      display: flex;
      flex-direction: column;
      align-items: center;
      padding: 2rem;
    }
    video {
      width: 90%;
      max-width: 960px;
      background: black;
      margin-bottom: 1rem;
    }
    select, ul {
      margin: 0.5rem;
      padding: 0.5rem;
      font-size: 16px;
      width: 300px;
    }
    ul {
      list-style: none;
      padding: 0;
    }
    li {
      cursor: pointer;
      background: #222;
      margin: 5px 0;
      padding: 10px;
      border-radius: 4px;
    }
    li:hover {
      background: #444;
    }
  </style>
</head>
<body>
  <video id="video" controls autoplay muted></video>

  <select id="channelDropdown">
    <option value="dreamworks">DreamWorks HD</option>
    <option value="cnvg">HBO</option>
  </select>

  <ul id="channelList">
    <li data-channel="dreamworks">DreamWorks HD</li>
    <li data-channel="cnvg">HBO</li>
  </ul>

  <script>
    const video = document.getElementById('video');
    const player = new shaka.Player(video);

    const channels = {
      dreamworks: {
        name: "DreamWorks HD",
        url: "https://qp-pldt-live-grp-02-prod.akamaized.net/out/u/cg_dreamworks_hd1.mpd",
        keys: {
          "4ab9645a2a0a47edbd65e8479c2b9669": "8cb209f1828431ce9b50b593d1f44079"
        }
      },
      cnvg: {
        name: "HBO",
        url: "https://qp-pldt-live-grp-03-prod.akamaized.net/out/u/cg_hbohd.mpd",
        keys: {
          "4ab9645a2a0a47edbd65e8479c2b9669": "8cb209f1828431ce9b50b593d1f44079"
        }
      }
    };

    function loadChannel(channelId) {
      const channel = channels[channelId];
      if (!channel) return;

      player.configure({
        drm: {
          clearKeys: channel.keys
        }
      });

      player.load(channel.url).then(() => {
        console.log("Channel loaded:", channel.name);
        video.play();
      }).catch(e => {
        console.error("Error loading channel:", e);
      });
    }

    document.getElementById('channelDropdown').addEventListener('change', e => {
      loadChannel(e.target.value);
    });

    document.getElementById('channelList').addEventListener('click', e => {
      if (e.target.tagName === 'LI') {
        loadChannel(e.target.dataset.channel);
      }
    });

    document.addEventListener('DOMContentLoaded', () => {
      loadChannel('dreamworks'); // Default channel
    });
  </script>
</body>
</html>
